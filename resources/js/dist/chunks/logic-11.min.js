(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{332:function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));a(53),a(38),a(28),a(7),a(14),a(3),a(15),a(10),a(8),a(11),a(22),a(16),a(13);function i(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return n(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return n(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=new Array(e);a<e;a++)i[a]=t[a];return i}var r=["btn-sm","btn-lg"],l={sm:"btn-sm",md:"",lg:"btn-lg"},s={props:{buttonSize:{type:[String,null],default:null,validator:function(t){return-1!==[""].concat(r,i(Object.keys(l))).indexOf(t)}}},computed:{buttonSizeClass:function(){return l.hasOwnProperty(this.buttonSize)?l[this.buttonSize]:this.buttonSize}}}},395:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{ref:"newsletterForm",attrs:{id:"newsletter-input-form_"+t._uid,method:"post"},on:{submit:function(e){return e.preventDefault(),t.validateData(e)}}},[a("div",{staticClass:"row"},[t.showNameInputs?a("div",{staticClass:"col-6"},[a("div",{staticClass:"input-unit",attrs:{"data-validate":"!regex"}},[a("label",{attrs:{for:"first-name-input_"+t._uid}},[t._v(t._s(t.$translate("Frontend::Template.newsletterFirstName")))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.firstName,expression:"firstName"}],attrs:{type:"text","data-validate-ref":"/[.:\\/\\d]/g",id:"first-name-input_"+t._uid},domProps:{value:t.firstName},on:{input:function(e){e.target.composing||(t.firstName=e.target.value)}}})])]):t._e(),t._v(" "),t.showNameInputs?a("div",{staticClass:"col-6 pl-0"},[a("div",{staticClass:"input-unit",attrs:{"data-validate":"!regex"}},[a("label",{attrs:{for:"last-name-input_"+t._uid}},[t._v(t._s(t.$translate("Frontend::Template.newsletterLastName")))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.lastName,expression:"lastName"}],attrs:{type:"text","data-validate-ref":"/[.:\\/\\d]/g",id:"last-name-input_"+t._uid},domProps:{value:t.lastName},on:{input:function(e){e.target.composing||(t.lastName=e.target.value)}}})])]):t._e(),t._v(" "),a("div",{staticClass:"col-12"},[a("div",{staticClass:"input-group"},[a("div",{staticClass:"input-unit",attrs:{"data-validate":"mail"}},[a("label",{attrs:{for:"email-input-id_"+t._uid}},[t._v(t._s(t.$translate("Frontend::Template.newsletterEmail"))+" *")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{type:"email",autocomplete:"email",id:"email-input-id_"+t._uid},domProps:{value:t.email},on:{focus:function(e){t.loadRecaptcha=!0},input:function(e){e.target.composing||(t.email=e.target.value)}}})]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.honeypot,expression:"honeypot"}],staticClass:"honey",attrs:{autocomplete:"none",type:"text",name:"username",tabindex:"-1"},domProps:{value:t.honeypot},on:{input:function(e){e.target.composing||(t.honeypot=e.target.value)}}})])]),t._v(" "),t.showPrivacyPolicyCheckbox?a("div",{staticClass:"col-12"},[a("div",{staticClass:"form-check small",attrs:{"data-validate":""}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.privacyPolicyValue,expression:"privacyPolicyValue"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"privacy-policy-accept-id_"+t._uid,name:"privacy-policy-accept"},domProps:{checked:Array.isArray(t.privacyPolicyValue)?t._i(t.privacyPolicyValue,null)>-1:t.privacyPolicyValue},on:{change:function(e){var a=t.privacyPolicyValue,i=e.target,n=!!i.checked;if(Array.isArray(a)){var r=t._i(a,null);i.checked?r<0&&(t.privacyPolicyValue=a.concat([null])):r>-1&&(t.privacyPolicyValue=a.slice(0,r).concat(a.slice(r+1)))}else t.privacyPolicyValue=n}}}),t._v(" "),a("label",{staticClass:"form-check-label",attrs:{for:"privacy-policy-accept-id_"+t._uid},domProps:{innerHTML:t._s(t.privacyPolicyText)}})])]):t._e(),t._v(" "),a("div",{staticClass:"col-12 mt-3"},[a("div",{staticClass:"input-group-btn"},[a("button",{staticClass:"btn btn-block btn-primary btn-appearance",class:t.buttonSizeClass,attrs:{type:"button",disabled:t.isDisabled},on:{click:t.validateData}},[a("icon",{attrs:{icon:"paper-plane-o",loading:t.isDisabled}}),t._v("\n                    "+t._s(t.$translate("Frontend::Template.newsletterSubscribeButtonLabel"))+"\n                ")],1)])])]),t._v(" "),t.$ceres.config.global.googleRecaptchaApiKey&&t.loadRecaptcha?a("recaptcha"):t._e()],1)};i._withStripped=!0;a(36),a(17),a(47),a(4),a(13);var n=a(6),r=a(12),l=a(37),s=a(152),o={mixins:[a(332).a],props:{showNameInputs:{type:Boolean,default:!1},showPrivacyPolicyCheckbox:{type:Boolean,default:!0},emailFolder:{type:Number,default:0}},data:function(){return{firstName:"",lastName:"",email:"",isDisabled:!1,privacyPolicyValue:!1,honeypot:"",loadRecaptcha:!1}},computed:{privacyPolicyText:function(){var t='<a href="'+App.urls.privacyPolicy+'" target="_blank"><span class="text-primary text-appearance">'+this.$translate("Frontend::Template.checkoutPrivacyPolicy",{hyphen:"&shy;"})+"</span></a>";return this.$translate("Frontend::Template.newsletterAcceptPrivacyPolicy",{policy:t})}},methods:{validateData:function(){var t=this;this.isDisabled=!0,l.default.validate($("#newsletter-input-form_"+this._uid)).done((function(){t.save()})).fail((function(e){l.default.markInvalidFields(e,"error"),e.filter((function(t){return null!==t.dataset.validate})).map((function(t){return{type:t.dataset.validate,name:t.innerText}})).forEach((function(e){"!regex"===e.type&&r.default.error(t.$translate("Frontend::Template.newsletterNotAllowedCharacters",{name:e.name}))})),t.isDisabled=!1}))},save:function(){var t=this,e=this.$el.querySelector("[data-recaptcha]");if(App.config.global.googleRecaptchaApiKey&&(!window.grecaptcha||!e))return r.default.error(this.$translate("Frontend::Template.newsletterAcceptRecaptchaCookie")),void(this.isDisabled=!1);Object(s.a)(this.$el).then((function(e){n.default.post("/rest/io/customer/newsletter",{email:t.email,firstName:t.firstName,lastName:t.lastName,emailFolder:t.emailFolder,honeypot:t.honeypot,recaptcha:e}).done((function(e){e.containsHoneypot?r.default.warn(t.$translate("Frontend::Template.newsletterHoneypotWarning")):r.default.success(t.$translate("Frontend::Template.newsletterSuccessMessage")).closeAfter(3e3),t.resetInputs()})).fail((function(){r.default.error(t.$translate("Frontend::Template.newsletterErrorMessage")).closeAfter(5e3)})).always((function(){t.isDisabled=!1,t.resetRecaptcha()}))}))},resetInputs:function(){this.firstName="",this.lastName="",this.email="",this.privacyPolicyValue=!1},resetRecaptcha:function(){if(2===App.config.global.googleRecaptchaVersion&&window.grecaptcha){var t=this.$el.querySelector("[data-recaptcha]");window.grecaptcha.reset(t)}}}},c=a(5),u=Object(c.a)(o,i,[],!1,null,null,null);u.options.__file="resources/js/src/app/components/newsletter/NewsletterInput.vue";e.default=u.exports}}]);
//# sourceMappingURL=logic-11.min.js.map